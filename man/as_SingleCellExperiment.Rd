% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/as.R
\name{as_SingleCellExperiment}
\alias{as_SingleCellExperiment}
\title{Convert an \code{AnnData} to a \code{SingleCellExperiment}}
\arguments{
\item{adata}{The \code{AnnData} object to convert}

\item{assays_mapping}{A named vector where names are names of \code{assays} in the
resulting \code{SingleCellExperiment} object and values are keys of \code{layers} in
\code{adata}. See below for details.}

\item{colData_mapping}{A named vector where names are columns of \code{colData} in
the resulting \code{SingleCellExperiment} object and values are columns of \code{obs}
in \code{adata}. See below for details.}

\item{rowData_mapping}{A named vector where names are columns of \code{rowData} in
the resulting \code{SingleCellExperiment} object and values are columns of \code{var}
in \code{adata}. See below for details.}

\item{reducedDims_mapping}{A named vector where names are names of
\code{reducedDims} in the resulting \code{SingleCellExperiment} object and values are
keys of \code{obsm} in \code{adata}. Alternatively, a named list where names are
names of \code{reducedDims} in the resulting \code{SingleCellExperiment} object and
values are vectors with the items \code{"sampleFactors"} and \code{"featureLoadings"}
and/or \code{"metadata"}. See below for details.}

\item{colPairs_mapping}{A named vector where names are names of \code{colPairs} in
the resulting \code{SingleCellExperiment} object and values are keys of \code{obsp}
in \code{adata}. See below for details.}

\item{rowPairs_mapping}{A named vector where names are names of \code{rowPairs} in
the resulting \code{SingleCellExperiment} object and values are keys of \code{varp}
in \code{adata}. See below for details.}

\item{metadata_mapping}{A named vector where names are names of \code{metadata} in
the resulting \code{SingleCellExperiment} object and values are keys of \code{uns} in
\code{adata}. See below for details.}
}
\value{
A \code{SingleCellExperiment} object containing the requested data from
\code{adata}
}
\description{
Convert an \code{AnnData} object to a \code{SingleCellExperiment} object
}
\details{
\subsection{Mapping arguments}{

All mapping arguments expect a named character vector where names are the
names of the slot in the \code{SingleCellExperiment} object and values are the
keys of the corresponding slot of \code{adata}. If \code{NULL}, the conversion function
will guess which items to copy as described in the conversion tables
conversion table below. In most cases, the default is to copy all items using
the same names except where the correspondence between objects is unclear.
The \code{reducedDims_mapping} argument can also accept a more complex list format,
see below for details. To avoid copying anything to a slot, provide an empty
vector. If an unnamed vector is provided, the values will be used as names
\subsection{Examples:}{
\itemize{
\item \code{NULL} will guess which items to copy as described in the conversion
table
\item \code{c(sce_item = "adata_item")} will copy \code{adata_item} from the slot in \code{adata} to
\code{sce_item} in the corresponding slot of new \code{SingleCellExperiment} object
\item \code{c()} will avoid copying anything to the slot
\item \code{c("adata_item")} is equivalent to \code{c(adata_item = "adata_item")}
}
}

}

\subsection{Conversion table}{\tabular{llll}{
   \strong{From \code{AnnData}} \tab \strong{To \code{SingleCellExperiment}} \tab \strong{Example mapping argument} \tab \strong{Default if \code{NULL}} \cr
   \code{adata$layers} \tab \code{assays(sce)} \tab \code{assays_mapping = c(counts = "counts")} \tab All items are copied by name \cr
   \code{adata$obs} \tab \code{colData(sce)} \tab \code{colData_mapping = c(n_counts = "n_counts", cell_type = "CellType")} \tab All columns are copied by name \cr
   \code{adata$var} \tab \code{rowData(sce)} \tab \code{rowData_mapping = c(n_cells = "n_cells", pct_zero = "PctZero")} \tab All columns are copied by name \cr
   \code{adata$obsm} \tab \code{reducedDims(sce)} \tab \code{reducedDims_mapping = c(pca = "X_pca")} \strong{OR} \code{reducedDims_mapping = list(pca = c(obsm = "X_pca", varm = "PCs", uns = "pca_metadata"))} \tab All items are copied by name without loadings except for \code{"X_pca"} for which loadings are added from \code{"PCs"} \cr
   \code{adata$obsp} \tab \code{colPairs(sce)} \tab \code{colPairs_mapping = c(nn = "connectivities")} \tab All items are copied by name \cr
   \code{adata$varp} \tab \code{rowPairs(sce)} \tab \code{rowPairs_mapping = c(gene_overlaps = "similarities")} \tab All items are copied by name \cr
   \code{adata$uns} \tab \code{metadata(sce)} \tab \code{uns_mapping = c(project_metadata = "metadata")} \tab All items are copied by name \cr
}

}

\subsection{The \code{reducedDims_mapping} argument}{

For the simpler named vector format, the names should be the names of
\code{reducedDims} in the resulting \code{SingleCellExperiment} object, and the values
should be the keys of \code{obsm} in \code{adata}.

For more advanced mapping, use the list format where each item is a vector
with the following names used to create a
\code{\link[SingleCellExperiment:LinearEmbeddingMatrix]{SingleCellExperiment::LinearEmbeddingMatrix}} (if \code{featureLoadings} or
\code{metadata} is provided):
\itemize{
\item \code{sampleFactors}: a key of the \code{obsm} slot in \code{adata},
\code{adata$obsm[[sampleFactors]]} is passed to the \code{sampleFactors} argument
\item \code{featureLoadings}: a key of the \code{varm} slot in \code{adata} (optional),
\code{adata$varm[[featureLoadings]]} is passed to the \code{featureLoadings} argument
\item \code{metadata}: a key of the \code{uns} slot in \code{adata} (optional),
\code{adata$uns[[metadata]]} is passed to the \code{metadata} argument
}
}
}
\examples{
\dontshow{if (rlang::is_installed("SingleCellExperiment")) (if (getRversion() >= "3.4") withAutoprint else force)(\{ # examplesIf}
  ad <- AnnData(
    X = matrix(1:5, 3L, 5L),
    layers = list(A = matrix(5:1, 3L, 5L), B = matrix(letters[1:5], 3L, 5L)),
    obs = data.frame(row.names = LETTERS[1:3], cell = 1:3),
    var = data.frame(row.names = letters[1:5], gene = 1:5)
  )

  # Default usage
  sce <- ad$as_SingleCellExperiment(
    assays_mapping = NULL,
    colData_mapping = NULL,
    rowData_mapping = NULL,
    reducedDims_mapping = NULL,
    colPairs_mapping = NULL,
    rowPairs_mapping = NULL,
    metadata_mapping = NULL
 )
\dontshow{\}) # examplesIf}
}
